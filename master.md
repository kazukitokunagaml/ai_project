# AI Master Instructions

作業開始時に `master.md` → `rules.md` → `LEARNINGS.md` の順で読み込むこと。
セッション引き継ぎファイル (`HANDOFF.md`) が存在する場合は最優先で読むこと。

---

## 行動原則

- **外科的変更**: 依頼された箇所だけを直せ。周辺コードの改善・リファクタリング・フォーマット修正はするな
- **最小主義**: 要求されていない抽象化・ヘルパー関数・拡張性を入れるな。シンプルに書けるならそうせよ
- **押し戻し**: より単純な方法があるなら提案せよ。ユーザーの指示でも過剰に複雑なら代替案を示せ
- **変更前に計画を示せ**: 大きな変更は実装前に方針を提示し承認を得よ

## 技術スタック

| カテゴリ | 技術 |
|---|---|
| 言語 | Python 3.12+ |
| パッケージマネージャ | uv |
| テスト | pytest |
| リンター/フォーマッター | ruff |

## コマンド

```bash
uv run pytest -v            # テスト
uv run ruff check .         # リント
uv run ruff format .        # フォーマット
```

## 境界条件

**確認不要で実行してよい**: リント、フォーマット、テスト実行

**実行前にユーザーに確認せよ**:
- 新しい外部ライブラリの導入
- DBスキーマの変更
- アーキテクチャに影響する設計変更

**禁止**: `.env`・認証情報のコミット / `main` への直接プッシュ / `force push` / パスしているテストの削除

## セッション管理

- セッションが長くなり文脈が溢れそうな場合、`HANDOFF.md` を作成し次のセッションへ引き継げ
- 有用な知見が得られたら `LEARNINGS.md` に追記せよ
- `HANDOFF.md` の内容を引き継いだセッションは、完了後に `HANDOFF.md` を削除せよ
